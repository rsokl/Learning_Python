

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta content="Topic: Numpy array basic indexing, Difficulty: Medium, Category: Section" name="description" />
<meta content="basic index, slice, no copy index, multidimensional array, nd array, view, reverse, axis" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Introducing Basic and Advanced Indexing &mdash; Python Like You Mean It</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-115029372-1"></script>
        <script src="../_static/gtag.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Indexing" href="AdvancedIndexing.html" />
    <link rel="prev" title="Array Broadcasting" href="Broadcasting.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Python Like You Mean It
          

          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Python Like You Mean It</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_1.html">Module 1: Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_2.html">Module 2: The Essentials of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_2_problems.html">Module 2: Problems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../module_3.html">Module 3: The Essentials of NumPy</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="IntroducingTheNDarray.html">Introducing the ND-array</a></li>
<li class="toctree-l2"><a class="reference internal" href="AccessingDataAlongMultipleDimensions.html">Accessing Data Along Multiple Dimensions in an Array</a></li>
<li class="toctree-l2"><a class="reference internal" href="BasicArrayAttributes.html">Basic Array Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="FunctionsForCreatingNumpyArrays.html">Functions for Creating NumPy Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="ArrayTraversal.html">Iterating Over Arrays &amp; Array-Traversal Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="VectorizedOperations.html">“Vectorized” Operations: Optimized Computations on NumPy Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="Broadcasting.html">Array Broadcasting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introducing Basic and Advanced Indexing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Basic-Indexing">Basic Indexing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Indexing-with-Integers-and-Slice-Objects">Indexing with Integers and Slice Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Using-a-Tuple-as-an-N-dimensional-Index">Using a Tuple as an N-dimensional Index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Ellipsis-and-Newaxis-objects">Ellipsis and Newaxis objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Producing-a-View-of-an-Array">Producing a View of an Array</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Augmenting-the-Underlying-Data-of-an-Array">Augmenting the Underlying Data of an Array</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#In-Place-Assignments">In-Place Assignments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Augmented-Assignments">Augmented Assignments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Specifying-out-to-Perform-NumPy-Operations-In-Place">Specifying <code class="docutils literal notranslate"><span class="pre">out</span></code> to Perform NumPy Operations In-Place</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Benefits-and-Risks-of-Augmenting-Data-In-Place">Benefits and Risks of Augmenting Data In-Place</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Links-to-Official-Documentation">Links to Official Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Reading-Comprehension-Solutions">Reading Comprehension Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="AdvancedIndexing.html">Advanced Indexing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../module_3_problems.html">Module 3: Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_4.html">Module 4: Object Oriented Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_5.html">Module 5: Odds and Ends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Like You Mean It</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../module_3.html">Module 3: The Essentials of NumPy</a> &raquo;</li>
        
      <li>Introducing Basic and Advanced Indexing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Module3_IntroducingNumpy/BasicIndexing.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Introducing-Basic-and-Advanced-Indexing">
<h1>Introducing Basic and Advanced Indexing<a class="headerlink" href="#Introducing-Basic-and-Advanced-Indexing" title="Permalink to this headline">¶</a></h1>
<p>Thus far we have seen that we can access the contents of a NumPy array by specifying an integer or slice-object as an index for each one of its dimensions. Indexing into and slicing along the dimensions of an array are known as basic indexing. NumPy also provides a sophisticated system of “advanced indexing”, which permits us powerful means for accessing elements of an array that is flexible beyond specifying integers and slices along axes. For example, we can use advanced indexing to access all
of the negative-valued elements from <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># demonstrating basic indexing and advanced indexing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">],</span>
<span class="o">...</span>               <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">8</span><span class="p">],</span>
<span class="o">...</span>               <span class="p">[</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>  <span class="o">-</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">6</span><span class="p">]])</span>

<span class="c1"># Access the column-1 of row-0 and row-2.</span>
<span class="c1"># This is an example of basic indexing.</span>
<span class="c1"># A &quot;view&quot; of the underlying data in `x`</span>
<span class="c1"># is produced; no data is copied.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">])</span>

<span class="c1"># An example of advanced indexing.</span>
<span class="c1"># Access all negative elements in `x`.</span>
<span class="c1"># This produces a copy of the accessed data.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>We will see that, where basic indexing provides us with a <em>view</em> of the data within the array, without making a copy of it, advanced indexing requires that a copy of the accessed data be made. Here, we will define basic indexing and understand the nuances of working with views of arrays. The next section, then, is dedicated to understanding advanced indexing.</p>
<div class="section" id="Basic-Indexing">
<h2>Basic Indexing<a class="headerlink" href="#Basic-Indexing" title="Permalink to this headline">¶</a></h2>
<p>We begin this subsection by defining precisely what basic indexing is. Next, we will touch on each component of this definition, and lastly we will delve into the significance of basic indexing in the way it permits us to reference the underlying data of an array without copying it.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Definition: Basic Indexing</strong>:</p>
<p>Given an <span class="math notranslate nohighlight">\(N\)</span>-dimensional array, <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">x[index]</span></code> invokes <strong>basic indexing</strong> whenever <code class="docutils literal notranslate"><span class="pre">index</span></code> is a <em>tuple</em> containing any combination of the following types of objects:</p>
<ul class="simple">
<li><p>integers</p></li>
<li><p><a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module2_EssentialsOfPython/SequenceTypes.html#Slicing">slice</a> objects</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#Ellipsis">Ellipsis</a> objects</p></li>
<li><p><a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module3_IntroducingNumpy/Broadcasting.html#Inserting-Size-1-Dimensions-into-An-Array">numpy.newaxis</a> objects</p></li>
</ul>
<p>Accessing the contents of an array via basic indexing <em>does not create a copy of those contents</em>. Rather, a “view” of the same underlying data is produced.</p>
</div>
<div class="section" id="Indexing-with-Integers-and-Slice-Objects">
<h3>Indexing with Integers and Slice Objects<a class="headerlink" href="#Indexing-with-Integers-and-Slice-Objects" title="Permalink to this headline">¶</a></h3>
<p>Our discussion of <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module3_IntroducingNumpy/AccessingDataAlongMultipleDimensions.html">accessing data along multiple dimensions of a NumPy array</a> already provided a comprehensive rundown on the use of integers and slices to access the contents of an array. According to the preceding definition, <em>these were all examples of basic indexing</em>.</p>
<p>To review the material discussed in that section, recall that one can access an individual element or a “subsection” of an <span class="math notranslate nohighlight">\(N\)</span>-dimensional array by specifying <span class="math notranslate nohighlight">\(N\)</span> integers or slice-objects, or a combination of the two. We also saw that, when supplied fewer-than <span class="math notranslate nohighlight">\(N\)</span> indices, NumPy will automatically “fill-in” the remaining indices with trailing slices. Keep in mind that the indices start at 0, such that the 4th column in <code class="docutils literal notranslate"><span class="pre">x</span></code> corresponds to column-3.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Accessing the element located</span>
<span class="c1"># at row-1, last-column of `x`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="mi">8</span>

<span class="c1"># Access the subarray of `x`</span>
<span class="c1"># contained within the first two rows</span>
<span class="c1"># and the first three columns</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">]])</span>

<span class="c1"># NumPy fills in &quot;trailing&quot; slices</span>
<span class="c1"># if we don&#39;t supply as many indices</span>
<span class="c1"># as there are dimensions in that array</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># equivalent to x[0, :]</span>
<span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">])</span>
</pre></div>
</div>
<p>Recall that the familiar <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module2_EssentialsOfPython/SequenceTypes.html#Slicing">slicing</a> syntax actually forms <code class="docutils literal notranslate"><span class="pre">slice</span></code> objects “behind the scenes”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reviewing the `slice` object</span>

<span class="c1"># equivalent: x[:2, :3]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="section" id="Using-a-Tuple-as-an-N-dimensional-Index">
<h3>Using a Tuple as an N-dimensional Index<a class="headerlink" href="#Using-a-Tuple-as-an-N-dimensional-Index" title="Permalink to this headline">¶</a></h3>
<p>According to its definition, we must supply our array-indices as a tuple in order to invoke basic indexing. As it turns out, we have been forming tuples of indices all along! That is, every time that we index into an array using the syntax <code class="docutils literal notranslate"><span class="pre">x[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>, we are actually forming a <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module2_EssentialsOfPython/SequenceTypes.html#Tuples">tuple</a> containing those indices. That is, <code class="docutils literal notranslate"><span class="pre">x[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">x[(i,</span> <span class="pre">j,</span> <span class="pre">k)]</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">x[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> forms the tuple <code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">j,</span> <span class="pre">k)</span></code> and passes that to the array’s “get-item” mechanism. Thus, <code class="docutils literal notranslate"><span class="pre">x[0,</span> <span class="pre">3]</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">x[(0,</span> <span class="pre">3)]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># N-dimensional indexing utilizes tuples:</span>
<span class="c1"># `x[i, j, k]` is equivalent to `x[(i, j, k)]`</span>

<span class="c1"># equivalent: x[1, -1]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
<span class="mi">8</span>

<span class="c1"># equivalent: x[:2, :3]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">3</span><span class="p">))]</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">]])</span>

<span class="c1"># equivalent: x[0]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[(</span><span class="mi">0</span><span class="p">,)]</span>
<span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">])</span>
</pre></div>
</div>
<p>All objects used in this “get-item” syntax are packed into a tuple. For instance, <code class="docutils literal notranslate"><span class="pre">x[0,</span> <span class="pre">(0,</span> <span class="pre">1)]</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">x[(0,</span> <span class="pre">(0,</span> <span class="pre">1))]</span></code>. You may be surprised to find that this is a valid index. However, see that <em>it does not invoke basic indexing</em>; the index used here is a tuple that contains an integer <em>and another tuple</em>, which is not permitted by the rules of basic indexing.</p>
<p>Finally, note that the rules of basic indexing specifically call for a <em>tuple</em> of indices. Supplying a list of indices triggers advanced indexing rather than basic indexing!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># basic indexing specifically requires a tuple</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
<span class="mi">8</span>

<span class="c1"># indexing with a list triggers advanced indexing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">8</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">6</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="section" id="Ellipsis-and-Newaxis-objects">
<h3>Ellipsis and Newaxis objects<a class="headerlink" href="#Ellipsis-and-Newaxis-objects" title="Permalink to this headline">¶</a></h3>
<p>Recall from our discussion of broadcasting, that the <code class="docutils literal notranslate"><span class="pre">numpy.newaxis</span></code> object can be passed as an index to an array, in order to <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module3_IntroducingNumpy/Broadcasting.html#Inserting-Size-1-Dimensions-into-An-Array">insert a size-1 dimension into the array</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># inserting size-1 dimensions with `np.newaxis`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># forming the index as an explicit tuple</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[(</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also use the built-in <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> object in order to insert slices into our index such that the index has as many entries as the array has dimensions. In the same way that <code class="docutils literal notranslate"><span class="pre">:</span></code> can be used to represent a <code class="docutils literal notranslate"><span class="pre">slice</span></code> object, <code class="docutils literal notranslate"><span class="pre">...</span></code> can be used to represent an <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">]],</span>
<span class="gp">...</span>
<span class="gp">... </span>              <span class="p">[[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]],</span>
<span class="gp">...</span>
<span class="gp">... </span>              <span class="p">[[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">]]])</span>

<span class="go"># equivalent: `y[:, :, 0]`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">array([[ 0,  4],</span>
<span class="go">       [ 8, 12],</span>
<span class="go">       [16, 20]])</span>

<span class="go"># using an explicit tuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">[(</span><span class="bp">Ellipsis</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="go">array([[ 0,  4],</span>
<span class="go">       [ 8, 12],</span>
<span class="go">       [16, 20]])</span>

<span class="go"># equivalent: `y[0, :, 1]`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="go">array([1, 5])</span>
</pre></div>
</div>
<p>An index cannot possess more than one <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> entry. This can be extremely useful when working with arrays of varying dimensionalities. To access column-0 along all dimensions of an array, <code class="docutils literal notranslate"><span class="pre">z</span></code>, would look like <code class="docutils literal notranslate"><span class="pre">z[:,</span> <span class="pre">0]</span></code> for a 2D array, <code class="docutils literal notranslate"><span class="pre">z[:,</span> <span class="pre">:,</span> <span class="pre">0]</span></code> for a 3D array, and so on. <code class="docutils literal notranslate"><span class="pre">z[...,</span> <span class="pre">0]</span></code> succinctly encapsulates all iterations of this.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Takeaway:</strong></p>
<p>Basic indexing is triggered whenever a tuple of: integer, <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.newaxis</span></code>, and/or <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> objects, is used as an index for a NumPy array. An array produced via basic indexing is a <em>view</em> of the same underlying data as the array that was indexed into; no data is copied through basic indexing.</p>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Reading Comprehension: Ellipsis</strong></p>
<p>Given a <span class="math notranslate nohighlight">\(N\)</span>-dimensional array, <code class="docutils literal notranslate"><span class="pre">x</span></code>, index into <code class="docutils literal notranslate"><span class="pre">x</span></code> such that you access entry-0 of axis-0, the last entry of axis-<span class="math notranslate nohighlight">\(N-1\)</span>, slicing along all intermediate dimensions. <span class="math notranslate nohighlight">\(N\)</span> is at least <span class="math notranslate nohighlight">\(2\)</span>.</p>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Reading Comprehension: Basic Indexing</strong></p>
<p>Given a shape-(4, 3) array,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>                <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>
</pre></div>
</div>
<p>which of the following indexing schemes perform basic indexing? That is, in which instances does the index satisfy the rules of basic indexing?</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arr[0]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[:-1,</span> <span class="pre">0]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[(2,</span> <span class="pre">3)]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[[2,</span> <span class="pre">0]]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[np.array([2,</span> <span class="pre">0])]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[(0,</span> <span class="pre">1),</span> <span class="pre">(2,</span> <span class="pre">3)]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[slice(None),</span> <span class="pre">...]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[(np.newaxis,</span> <span class="pre">0,</span> <span class="pre">slice(1,</span> <span class="pre">2),</span> <span class="pre">np.newaxis)]</span></code></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="Producing-a-View-of-an-Array">
<h2>Producing a View of an Array<a class="headerlink" href="#Producing-a-View-of-an-Array" title="Permalink to this headline">¶</a></h2>
<p>As stated above, using basic indexing does not return a copy of the data being accessed, rather it produces a <em>view</em> of the underlying data. NumPy provides the function <code class="docutils literal notranslate"><span class="pre">numpy.shares_memory</span></code> to determine if two arrays refer to the same underlying data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">3.31</span><span class="p">,</span>  <span class="mf">4.71</span><span class="p">,</span>  <span class="mf">0.4</span> <span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span> <span class="mf">0.21</span><span class="p">,</span>  <span class="mf">2.85</span><span class="p">,</span>  <span class="mf">3.21</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="o">-</span><span class="mf">3.77</span><span class="p">,</span>  <span class="mf">4.53</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.15</span><span class="p">]])</span>

<span class="go"># `subarray` is column-0 of `z`, via</span>
<span class="go"># basic indexing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subarray</span> <span class="o">=</span> <span class="n">z</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subarray</span>
<span class="go">array([ 3.31,  0.21, -3.77])</span>

<span class="go"># `subarray` is a view of the array data</span>
<span class="go"># referenced by `z`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">subarray</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A single number returned by basic indexing <em>does not</em> share memory with the parent array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">3.31</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">z</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">numpy.copy</span></code> can be used to create a copy of an array, such that it no longer shares memory with any other array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># creating a distinct copy of an array</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">new_subarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">subarray</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">new_subarray</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">3.31</span><span class="p">,</span>  <span class="mf">0.21</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.77</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">new_subarray</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<p>Utilizing an array in a mathematical expression involving the arithmetic operators (<code class="docutils literal notranslate"><span class="pre">+,</span> <span class="pre">-,</span> <span class="pre">*,</span> <span class="pre">/,</span> <span class="pre">//,</span> <span class="pre">**</span></code>) returns an entirely distinct array, that does not share memory with the original array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># mathematical expressions like `subarray + 2`</span>
<span class="c1"># produce distinct arrays, not views</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">subarray</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">subarray</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<p>Thus updating a variable <code class="docutils literal notranslate"><span class="pre">subarray</span></code> via <code class="docutils literal notranslate"><span class="pre">subarray</span> <span class="pre">=</span> <span class="pre">subarray</span> <span class="pre">+</span> <span class="pre">2</span></code> does <em>not</em> overwrite the original data referenced by <code class="docutils literal notranslate"><span class="pre">subarray</span></code>. Rather, <code class="docutils literal notranslate"><span class="pre">subarray</span> <span class="pre">+</span> <span class="pre">2</span></code> assigns that new array to the variable <code class="docutils literal notranslate"><span class="pre">subarray</span></code>. NumPy does provide mechanisms for performing mathematical operations to directly update the underlying data of an array without having to create a distinct array. We will discuss these mechanisms in the next subsection.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Reading Comprehension: Views</strong></p>
<p>Given,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
              <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
              <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>
</pre></div>
</div>
<p>Which of the following expressions create views of <code class="docutils literal notranslate"><span class="pre">x</span></code>? That is, in which cases do <code class="docutils literal notranslate"><span class="pre">x</span></code> and the created variable reference the same underlying array data? Check your work by using <code class="docutils literal notranslate"><span class="pre">np.shares_memory</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a1</span> <span class="pre">=</span> <span class="pre">x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a2</span> <span class="pre">=</span> <span class="pre">x[0,</span> <span class="pre">0]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a3</span> <span class="pre">=</span> <span class="pre">x[:,</span> <span class="pre">0]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a4</span> <span class="pre">=</span> <span class="pre">x[:,</span> <span class="pre">0]</span> <span class="pre">+</span> <span class="pre">np.array([-1,</span> <span class="pre">-2,</span> <span class="pre">-3])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a5</span> <span class="pre">=</span> <span class="pre">np.copy(x[:,</span> <span class="pre">0])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a6</span> <span class="pre">=</span> <span class="pre">x[np.newaxis]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a7</span> <span class="pre">=</span> <span class="pre">x.reshape(2,</span> <span class="pre">3,</span> <span class="pre">2)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a8</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">x</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="Augmenting-the-Underlying-Data-of-an-Array">
<h2>Augmenting the Underlying Data of an Array<a class="headerlink" href="#Augmenting-the-Underlying-Data-of-an-Array" title="Permalink to this headline">¶</a></h2>
<p>Because basic indexing produces a <em>view</em> of an array’s underlying data, we must take time to understand the ways in which we can <em>augment</em> that underlying data, versus performing operations that produce an array with distinct data. Here we will see that:</p>
<ul class="simple">
<li><p>in-place assignments</p></li>
<li><p>augmented assignments</p></li>
<li><p>NumPy functions with the <code class="docutils literal notranslate"><span class="pre">out</span></code> argument</p></li>
</ul>
<p>can all be used to augment array data in-place.</p>
<div class="section" id="In-Place-Assignments">
<h3>In-Place Assignments<a class="headerlink" href="#In-Place-Assignments" title="Permalink to this headline">¶</a></h3>
<p>The assignment operator, <code class="docutils literal notranslate"><span class="pre">=</span></code>, can be used to update an array’s data in-place. Consider the array <code class="docutils literal notranslate"><span class="pre">a</span></code>, and its view <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Assigning a new array to <code class="docutils literal notranslate"><span class="pre">a</span></code> simply changes the data that <code class="docutils literal notranslate"><span class="pre">a</span></code> references, divorcing <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>, and leaving <code class="docutils literal notranslate"><span class="pre">b</span></code> unchanged.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># `a` is now assigned to reference a distinct array</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">])</span>

<span class="c1"># `b` still references the original data</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<p>Performing an assignment on a <em>view</em> of <code class="docutils literal notranslate"><span class="pre">a</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">a[:]</span></code>, instructs NumPy to perform the assignment to replace <code class="docutils literal notranslate"><span class="pre">a</span></code>’s data in-place.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># reinitialize `a` and `b`.</span>
<span class="c1"># `b` is again a view of `a`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>

<span class="c1"># assigning an array to a *view* of `a`</span>
<span class="c1"># causes NumPy to update the data in-place</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">])</span>

<span class="c1"># `b` a view of the same data, thus</span>
<span class="c1"># it is affected by this in-place assignment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
<p>This view-assignment mechanism can be used update a subsection of an array in-place.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>

<span class="go"># Assign row-0, column-0 the value -40</span>
<span class="go"># and row-0, column-2 the value -50</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">)</span>

<span class="go"># broadcast-assign -1 to a subsection of `p`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span>
<span class="go">array([[-40,   1, -50,   3],</span>
<span class="go">       [  4,   5,  -1,  -1],</span>
<span class="go">       [  8,   9,  -1,  -1]])</span>
</pre></div>
</div>
<p>Again, this updates the underlying data, and thus all views of this data reflect this change.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># `q` is still a view of row-0 of `p`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">q</span>
<span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span>   <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="Augmented-Assignments">
<h3>Augmented Assignments<a class="headerlink" href="#Augmented-Assignments" title="Permalink to this headline">¶</a></h3>
<p>Recall from our discussion of basic mathematical expressions in Python, that <a class="reference external" href="http://www.pythonlikeyoumeanit.com/Module2_EssentialsOfPython/Basic_Objects.html#Augmented-Assignment-Statements">augmented assignment expressions</a> provide a nice shorthand notation for updating the value of a variable. For example, the assignment expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">5</span></code> can be rewritten using the augmented assignment <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">5</span></code>.</p>
<p>While <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+=</span> <span class="pre">5</span></code> is truly only a shorthand in the context of basic Python objects (integers floats, etc.), <em>augmented assignments on NumPy arrays behave fundamentally different than their long-form counterparts</em>. Specifically, they directly update the underlying data referenced by the updated array, rather than creating a distinct array, thus affecting any arrays that are views of that data. We will demonstrate this here.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Demonstrating that augmented assignments on NumPy</span>
<span class="c1"># arrays update the underlying data reference by that</span>
<span class="c1"># array.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
<span class="o">...</span>               <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
<span class="o">...</span>               <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>

<span class="c1"># `b` and `c` are both views of row-0 of `a`, via basic indexing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># updating `b` using a mathematical expression creates</span>
<span class="c1"># a distinct array, which is divorced from `a` and `c`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="kc">False</span>

<span class="c1"># updating `c` using augmented assignment updates the</span>
<span class="c1"># underlying data that `c` is a view of</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># note that this update is reflected in `a` as well,</span>
<span class="c1"># as it still shares memory with `c`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
       <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="section" id="Specifying-out-to-Perform-NumPy-Operations-In-Place">
<h3>Specifying <code class="docutils literal notranslate"><span class="pre">out</span></code> to Perform NumPy Operations In-Place<a class="headerlink" href="#Specifying-out-to-Perform-NumPy-Operations-In-Place" title="Permalink to this headline">¶</a></h3>
<p>There is no reason why we should only be able to augment data using arithmetic operations. Indeed, <a class="reference external" href="https://www.pythonlikeyoumeanit.com/Module3_IntroducingNumpy/VectorizedOperations.html#NumPy%E2%80%99s-Mathematical-Functions">NumPy’s various mathematical functions</a> have an optional keyword argument, <code class="docutils literal notranslate"><span class="pre">out</span></code>, which can be used to specify where to “store” the result of the mathematical operation. By default, the operation will create a distinct array in memory, leaving the input data
unaffected.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specifying the &#39;out&#39; argument in a `numpy.exp`</span>
<span class="c1"># to augment the data of an array</span>

<span class="c1"># `b` is a view of `a`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># specifying &#39;out=a&#39; instructs NumPy</span>
<span class="c1"># to overwrite the data referenced by `a`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.22140276</span><span class="p">,</span> <span class="mf">1.4918247</span><span class="p">,</span> <span class="mf">1.8221188</span><span class="p">,</span> <span class="mf">2.22554093</span><span class="p">,</span> <span class="mf">2.71828183</span><span class="p">])</span>

<span class="c1"># `b` is still a view of the now-augmented data</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.22140276</span><span class="p">,</span> <span class="mf">1.4918247</span><span class="p">,</span> <span class="mf">1.8221188</span><span class="p">,</span> <span class="mf">2.22554093</span><span class="p">,</span> <span class="mf">2.71828183</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="Benefits-and-Risks-of-Augmenting-Data-In-Place">
<h3>Benefits and Risks of Augmenting Data In-Place<a class="headerlink" href="#Benefits-and-Risks-of-Augmenting-Data-In-Place" title="Permalink to this headline">¶</a></h3>
<p>It is critical to understand the relationship between arrays and the underlying data that they reference. <em>Operations that augment data in-place are more efficient than their counterparts that must allocate memory for a new array.</em> That is, an expression like <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">+=</span> <span class="pre">3</span></code> is more efficient than <code class="docutils literal notranslate"><span class="pre">array</span> <span class="pre">=</span> <span class="pre">array</span> <span class="pre">+</span> <span class="pre">3</span></code>.</p>
<p>That being said, to <em>unwittingly</em> augment the data of an array, and thus affect all views of that data, is a big mistake; this produces hard-to-find bugs in the code of novice NumPy users. See that the following function, <code class="docutils literal notranslate"><span class="pre">add_3</span></code>, will change the data of the input array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># updating an array in-place within a function</span>
<span class="k">def</span> <span class="nf">add_3</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">add_3</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="c1"># `x` is updated each time `f(x)` is called</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>This is hugely problematic unless you intended for <code class="docutils literal notranslate"><span class="pre">add_3</span></code> to affect the input array. To remedy this, you can simply begin the function by making a copy of the input array; afterwards you can freely augment this copied data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_3</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Reading Comprehension: Augmenting Array Data In-Place</strong></p>
<p>Given,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">2.</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">],</span>
              <span class="p">[</span> <span class="mf">4.</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">,</span>  <span class="mf">6.</span><span class="p">,</span>  <span class="mf">7.</span><span class="p">],</span>
              <span class="p">[</span> <span class="mf">8.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">11.</span><span class="p">]])</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
<p>Which of the following expressions updates the data originally referenced by <code class="docutils literal notranslate"><span class="pre">x</span></code>?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">+=</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">*=</span> <span class="mf">2.4</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">+=</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 5.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 6.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 7.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 8.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[:]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 9.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">z</span><span class="p">):</span> <span class="n">z</span> <span class="o">/=</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 10.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Takeaway:</strong></p>
<p>Assignments to views of an array, augmented assignments, and NumPy functions that provide an <code class="docutils literal notranslate"><span class="pre">out</span></code> argument, are all methods for augmenting the data of an array in-place. This will affect any arrays that are views of that data. Furthermore, these in-place operations are more efficient than their counterparts that allocate memory for a new array. That being said, in-place data augmentation must not be used haphazardly, for this will inevitably lead to treacherous bugs in one’s code.</p>
</div>
</div>
</div>
<div class="section" id="Links-to-Official-Documentation">
<h2>Links to Official Documentation<a class="headerlink" href="#Links-to-Official-Documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.indexing.html#indexing">Basic indexing</a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/glossary.html#term-view">Definition of ‘view’</a></p></li>
</ul>
</div>
<div class="section" id="Reading-Comprehension-Solutions">
<h2>Reading Comprehension Solutions<a class="headerlink" href="#Reading-Comprehension-Solutions" title="Permalink to this headline">¶</a></h2>
<p><strong>Ellipsis: Solution</strong></p>
<p>Given a <span class="math notranslate nohighlight">\(N\)</span>-dimensional array, <code class="docutils literal notranslate"><span class="pre">x</span></code>, index into <code class="docutils literal notranslate"><span class="pre">x</span></code> such that you axis entry-0 of axis-0, the last entry of axis-<span class="math notranslate nohighlight">\((N-1)\)</span>, slicing along all intermediate dimensions. <span class="math notranslate nohighlight">\(N\)</span> is at least <span class="math notranslate nohighlight">\(2\)</span>.</p>
<p>Using an <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> object in the index allows us to signal NumPy to insert the slices along the <span class="math notranslate nohighlight">\(N - 2\)</span> intermediate axis of <code class="docutils literal notranslate"><span class="pre">x</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">x[0,</span> <span class="pre">...,</span> <span class="pre">-1]</span></code> or <code class="docutils literal notranslate"><span class="pre">x[0,</span> <span class="pre">Ellipsis,</span> <span class="pre">-1]</span></code></p>
<p><strong>Basic Indexing: Solution</strong></p>
<p>In which instances does the index used satisfy the rules of basic indexing?</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arr[0]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[:-1,</span> <span class="pre">0]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[(2,</span> <span class="pre">3)]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[[2,</span> <span class="pre">0]]</span></code> ✘ (index is a <code class="docutils literal notranslate"><span class="pre">list</span></code>, not a <code class="docutils literal notranslate"><span class="pre">tuple</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[np.array([2,</span> <span class="pre">0])]</span></code> ✘ (index is a <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, not a <code class="docutils literal notranslate"><span class="pre">tuple</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[:,</span> <span class="pre">(2,</span> <span class="pre">3)]</span></code> ✘ (index contains a tuple; only <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">np.newaxis</span></code>, <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> allowed)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[slice(None),</span> <span class="pre">...]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr[(np.newaxis,</span> <span class="pre">0,</span> <span class="pre">slice(1,</span> <span class="pre">2),</span> <span class="pre">np.newaxis)]</span></code> ✔</p></li>
</ul>
<p><strong>Views: Solution</strong></p>
<p>Given,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span>
              <span class="p">[</span> <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">],</span>
              <span class="p">[</span> <span class="mi">8</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]])</span>
</pre></div>
</div>
<p>Which of the following expressions create views <code class="docutils literal notranslate"><span class="pre">x</span></code>? That is, in which cases do <code class="docutils literal notranslate"><span class="pre">x</span></code> and the created variable reference the same underlying array data? Check your work by using <code class="docutils literal notranslate"><span class="pre">np.shares_memory</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a1</span> <span class="pre">=</span> <span class="pre">x</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a2</span> <span class="pre">=</span> <span class="pre">x[0,</span> <span class="pre">0]</span></code> ✘; when basic indexing returns a single number, that number does not share memory with the parent array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a3</span> <span class="pre">=</span> <span class="pre">x[:,</span> <span class="pre">0]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a4</span> <span class="pre">=</span> <span class="pre">x[:,</span> <span class="pre">0]</span> <span class="pre">+</span> <span class="pre">np.array([-1,</span> <span class="pre">-2,</span> <span class="pre">-3])</span></code> ✘; arithmetic operations on NumPy arrays create distinct arrays by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a5</span> <span class="pre">=</span> <span class="pre">np.copy(x[:,</span> <span class="pre">0])</span></code> ✘; <code class="docutils literal notranslate"><span class="pre">numpy.copy</span></code> informs NumPy to create a distinct copy of an array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a6</span> <span class="pre">=</span> <span class="pre">x[np.newaxis]</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a7</span> <span class="pre">=</span> <span class="pre">x.reshape(2,</span> <span class="pre">3,</span> <span class="pre">2)</span></code> ✔</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a8</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">x</span></code> ✘; arithmetic operations on NumPy arrays create distinct arrays by default.</p></li>
</ul>
<p><strong>Augmenting Array Data In-Place: Solution</strong></p>
<p>Given,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">2.</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">],</span>
              <span class="p">[</span> <span class="mf">4.</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">,</span>  <span class="mf">6.</span><span class="p">,</span>  <span class="mf">7.</span><span class="p">],</span>
              <span class="p">[</span> <span class="mf">8.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">11.</span><span class="p">]])</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
<p>Which of the following expressions updates the data originally referenced by <code class="docutils literal notranslate"><span class="pre">x</span></code>?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 1.
&gt;&gt;&gt; x += 3 ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 2.
&gt;&gt;&gt; y *= 2.4 ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 3.
&gt;&gt;&gt; x = x + 3 ✘
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 4.
&gt;&gt;&gt; y = np.copy(y)
&gt;&gt;&gt; y += 3 ✘
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 5.
&gt;&gt;&gt; np.log(x[1:3], out=x[1:3]) ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 6.
&gt;&gt;&gt; y[:] = y + 2 ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 7.
&gt;&gt;&gt; x = np.square(x) ✘
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 8.
&gt;&gt;&gt; x[:] = 0 ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 9.
&gt;&gt;&gt; def f(z): z /= 3
&gt;&gt;&gt; f(y) ✔
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># 10.
&gt;&gt;&gt; np.square(y, out=y) ✔
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="AdvancedIndexing.html" class="btn btn-neutral float-right" title="Advanced Indexing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Broadcasting.html" class="btn btn-neutral float-left" title="Array Broadcasting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ryan Soklaski.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>